Metadata-Version: 2.4
Name: removebg-batch
Version: 0.1.0
Summary: Local, TIFF-safe batch background removal (1000+ images) using ONNX segmentation models.
Author: RemoveBG Batch
License: MIT
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.26
Requires-Dist: Pillow>=10.4
Requires-Dist: tifffile>=2024.9.20
Requires-Dist: tqdm>=4.66
Requires-Dist: rembg>=2.0.59
Requires-Dist: onnxruntime>=1.20
Provides-Extra: gpu
Requires-Dist: onnxruntime-gpu>=1.20; extra == "gpu"

## Batch background removal (local, TIFF-safe)

This repo contains a **local** (offline) batch background-removal app designed for **1000+ images** with **TIFF-compatible** input/output and a focus on **minimizing data loss**.

### What it does

- **Batch process a folder** (recursively optional)
- **Fast**: parallel workers + a lightweight local segmentation model (via ONNX)
- **TIFF output**: writes **RGBA TIFF** (original RGB preserved as much as possible; alpha is the computed cutout mask)
- **Data-loss minimizing**: keeps original **bit depth** when possible (e.g. 16-bit TIFF stays 16-bit), preserves common metadata like ICC profile when available
- **Offline**: uses a local AI model (not a cloud API)

### Quick start (macOS / Linux)

```bash
./scripts/install_mac_linux.sh
./.venv/bin/removebg-batch --help
```

### Quick start (Windows PowerShell)

```powershell
.\scripts\install_windows.bat
.\.venv\Scripts\removebg-batch --help
```

### Example usage

```bash
removebg-batch \
  --input "/path/to/input_folder" \
  --output "/path/to/output_folder" \
  --model u2netp \
  --workers 8 \
  --mask-max-size 1024 \
  --compression deflate
```

### Notes on performance targets

Getting **1000+ photos under 10 minutes** depends on CPU/GPU, image resolution, and settings:

- Use `--model u2netp` (fastest default)
- Increase `--workers` (but avoid oversubscription; start around half your logical cores)
- Use `--mask-max-size 1024` (or smaller) for speed
- If you have a compatible GPU, use `--provider cuda` when available

### Building a self-contained binary (optional)

You can package a standalone executable with PyInstaller:

```bash
python -m pip install -U pyinstaller
pyinstaller --noconfirm --clean -n removebg-batch -F -m removebg_batch.cli
```

The resulting binary appears in `dist/`.

